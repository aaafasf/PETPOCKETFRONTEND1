<div class="flex h-screen bg-gradient-to-br from-[#ECEFF3] via-[#F5F7FA] to-[#E9EDF2] 
            dark:from-[#020617] dark:via-[#020617] dark:to-[#020617]
            font-sans transition-colors duration-300">

  <!-- SIDEBAR -->
  <aside class="w-72 sidebar-animation
              bg-gradient-to-b from-[#050505] via-[#0B0B0F] to-[#000000]
              text-zinc-300 flex flex-col
              shadow-[0_25px_60px_rgba(0,0,0,0.9)]
              relative transition-colors duration-300">

    <!-- Accent top line -->
    <div class="absolute top-0 left-0 w-full h-[2px]
              bg-gradient-to-r from-[#F27438] via-orange-400 to-[#F27438]"></div>

    <!-- Logo -->
    <div class="px-8 pt-10 pb-8 text-center">
      <img src="/assets/img/logo-circular.png"
           class="w-20 mx-auto mb-6 opacity-90 transform transition-transform duration-300 hover:scale-110">
      <p class="text-[10px] tracking-[0.45em] font-semibold text-zinc-500">
        ADMIN SYSTEM
      </p>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 px-4 space-y-1 text-sm menu-items">
      <!-- Dashboard -->
      <a routerLink="/admin/dashboard"
         routerLinkActive="active-menu bg-white/10 text-white shadow-inner"
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center gap-4 px-5 py-3 rounded-xl
                hover:bg-white/5 transition">
        <span class="menu-icon text-xl">üìä</span> 
        <span class="menu-text">Dashboard</span>
        <span class="menu-highlight"></span>
      </a>

      <!-- Agenda -->
      <a routerLink="/admin/agenda"
         routerLinkActive="active-menu bg-white/10 text-white shadow-inner"
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center gap-4 px-5 py-3 rounded-xl
                hover:bg-white/5 transition">
        <span class="menu-icon text-xl">üìÖ</span> 
        <span class="menu-text">Agenda</span>
        <span class="menu-highlight"></span>
      </a>

      <!-- Planner -->
      <a routerLink="/admin/planner"
         routerLinkActive="active-menu bg-white/10 text-white shadow-inner"
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center gap-4 px-5 py-3 rounded-xl
                hover:bg-white/5 transition">
        <span class="menu-icon text-xl">üìã</span> 
        <span class="menu-text">Planner</span>
        <span class="menu-highlight"></span>
      </a>

      <div class="my-6 border-t border-white/10"></div>

      <!-- Servicios -->
      <a routerLink="/admin/servicios"
         routerLinkActive="active-menu bg-white/10 text-white shadow-inner"
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center gap-4 px-5 py-3 rounded-xl
                hover:bg-white/5 transition">
        <span class="menu-icon text-xl">ü©∫</span> 
        <span class="menu-text">Servicios</span>
        <span class="menu-highlight"></span>
      </a>

      <!-- Notificaciones -->
      <a routerLink="/admin/notifications" 
         routerLinkActive="active-menu bg-white/10 text-white shadow-inner"
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center gap-4 px-5 py-3 rounded-xl
                hover:bg-white/5 transition">
        <span class="menu-icon text-xl">üîî</span> 
        <span class="menu-text">Notificaciones</span>
        <span class="menu-highlight"></span>
      </a>

      <!-- Registro de usuario -->
      <a routerLink="/admin/users/create" 
         routerLinkActive="active-menu bg-white/10 text-white shadow-inner"
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center gap-4 px-5 py-3 rounded-xl
                hover:bg-white/5 transition">
        <span class="menu-icon text-xl">‚ûï</span> 
        <span class="menu-text">Registro de usuario</span>
        <span class="menu-highlight"></span>
      </a>

      <!-- Usuarios registrados -->
      <a routerLink="/admin/users" 
         routerLinkActive="active-menu bg-white/10 text-white shadow-inner"
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center gap-4 px-5 py-3 rounded-xl
                hover:bg-white/5 transition">
        <span class="menu-icon text-xl">üë•</span> 
        <span class="menu-text">Usuarios registrados</span>
        <span class="menu-highlight"></span>
      </a>
    </nav>

    <!-- Footer -->
    <div class="px-6 py-6 border-t border-white/10">
      <div class="flex items-center gap-4 bg-white/5 rounded-xl p-4 card-animation">
        <img src="/assets/img/pet-illustration.jpg" class="w-9 opacity-40">
        <div class="text-xs">
          <p class="text-zinc-300 font-medium">PetPocket</p>
          <p class="text-zinc-500">Admin Console</p>
        </div>
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="flex-1 flex flex-col overflow-hidden">
    <!-- HEADER -->
    <header class="h-20 flex items-center justify-between px-12
                   bg-white/70 dark:bg-[#020617]/80
                   backdrop-blur-xl border-b border-gray-200 dark:border-white/10
                   transition-colors duration-300 navbar-container">

      <div>
        <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 navbar-title group">
          <span class="inline-block transition-all duration-300 group-hover:tracking-wider group-hover:text-[#F27438]">
            Gesti√≥n de Notificaciones
          </span>
          <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#F27438] group-hover:w-full transition-all duration-500"></span>
        </h2>
        <p class="text-xs text-gray-500 dark:text-gray-400">
          Admin > Notificaciones > Lista
        </p>
      </div>

      <div class="flex items-center gap-4">
        <!-- DARK MODE BUTTON -->
        <button
          onclick="document.documentElement.classList.toggle('dark')"
          class="px-4 py-2 rounded-xl text-sm font-medium
                 bg-gray-100 dark:bg-white/10
                 text-gray-700 dark:text-gray-200
                 hover:scale-105 transition icon-button">
          üåô / ‚òÄÔ∏è
        </button>

        <button class="relative p-2 rounded-xl hover:bg-black/5 dark:hover:bg-white/10 transition">
          üîî
          <span class="absolute -top-1 -right-1 w-2 h-2 bg-[#F27438] rounded-full animate-pulse"></span>
        </button>

        <div class="flex items-center gap-3 bg-black/5 dark:bg-white/10 px-4 py-2 rounded-xl">
          <span class="text-sm font-medium text-gray-700 dark:text-gray-200">Admin</span>
          <div class="w-9 h-9 rounded-full bg-gradient-to-br from-[#F27438] to-orange-300
                      text-white flex items-center justify-center font-bold">
            A
          </div>
        </div>
      </div>
    </header>

    <!-- CONTENT -->
    <div class="flex-1 overflow-y-auto p-14 space-y-8">
      <!-- Secci√≥n principal -->
      <section class="bg-white dark:bg-[#020617]/80 rounded-[2.5rem] p-12
                      shadow-xl border border-gray-200 dark:border-white/10 transition card-animation form-container">

        <!-- Header con t√≠tulo y botones -->
        <div class="flex justify-between items-center mb-8">
          <div>
            <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2">
              Gesti√≥n de Notificaciones
            </h1>
            <p class="text-gray-600 dark:text-gray-400">
              Crea, edita y administra notificaciones para los usuarios
            </p>
          </div>
          <div class="flex gap-4">
            <p-button
              label="Crear Notificaci√≥n"
              icon="pi pi-plus"
              (onClick)="createNotification()"
              styleClass="p-button-primary">
            </p-button>
          </div>
        </div>

        <!-- BUSCADOR -->
        <div class="mb-8">
          <p-inputGroup>
            <p-inputGroupAddon>
              <i class="pi pi-search text-gray-400"></i>
            </p-inputGroupAddon>
            <input
              pInputText
              type="text"
              [(ngModel)]="searchTerm"
              (input)="filtrarNotificaciones()"
              placeholder="Buscar por usuario, mensaje..."
              class="w-full rounded-xl border border-gray-200 dark:border-white/10">
          </p-inputGroup>
        </div>

        <!-- TABLA DE NOTIFICACIONES -->
        <div class="overflow-x-auto rounded-xl border border-gray-200 dark:border-white/10">
          <p-table
            [value]="notificacionesFiltradas"
            [loading]="loading"
            [paginator]="true"
            [rows]="10"
            [showCurrentPageReport]="true"
            currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} notificaciones"
            [rowsPerPageOptions]="[5, 10, 25]"
            styleClass="p-datatable-striped"
            responsiveLayout="scroll">

            <!-- HEADER -->
            <ng-template pTemplate="header">
              <tr class="bg-gray-50 dark:bg-white/5 border-b border-gray-200 dark:border-white/10">
                <th pSortableColumn="mensaje" style="width: 25%" class="text-left py-4 px-6 font-semibold text-gray-700 dark:text-gray-200">
                  Mensaje <p-sortIcon field="mensaje"></p-sortIcon>
                </th>
                <th pSortableColumn="nameUsers" style="width: 15%" class="text-left py-4 px-6 font-semibold text-gray-700 dark:text-gray-200">
                  Usuario <p-sortIcon field="nameUsers"></p-sortIcon>
                </th>
                <th pSortableColumn="estadoNotificacion" style="width: 15%" class="text-left py-4 px-6 font-semibold text-gray-700 dark:text-gray-200">
                  Estado <p-sortIcon field="estadoNotificacion"></p-sortIcon>
                </th>
                <th pSortableColumn="createNotificacion" style="width: 20%" class="text-left py-4 px-6 font-semibold text-gray-700 dark:text-gray-200">
                  Fecha <p-sortIcon field="createNotificacion"></p-sortIcon>
                </th>
                <th style="width: 15%" class="text-center py-4 px-6 font-semibold text-gray-700 dark:text-gray-200">
                  Acciones
                </th>
              </tr>
            </ng-template>

            <!-- BODY - FILAS DE DATOS -->
            <ng-template pTemplate="body" let-notificacion>
              <tr class="border-b border-gray-200 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors duration-200 table-row-hover">
                <td class="py-4 px-6">
                  <p class="text-sm text-gray-900 dark:text-gray-100 font-medium truncate" [title]="notificacion.mensaje">
                    {{ notificacion.mensaje }}
                  </p>
                </td>
                <td class="py-4 px-6">
                  <p class="text-sm text-gray-600 dark:text-gray-400">
                    {{ notificacion.nameUsers || '-' }}
                  </p>
                </td>
                <td class="py-4 px-6">
                  <p-tag
                    [value]="getEstadoLabel(notificacion)"
                    [severity]="getSeverityEstado(notificacion.estadoNotificacion)"
                    styleClass="text-xs">
                  </p-tag>
                </td>
                <td class="py-4 px-6">
                  <p class="text-sm text-gray-600 dark:text-gray-400">
                    {{ formatearFecha(notificacion.createNotificacion) }}
                  </p>
                </td>
                <td class="py-4 px-6">
                  <div class="flex justify-center gap-2">
                    <p-button
                      icon="pi pi-pencil"
                      styleClass="p-button-rounded p-button-warning p-button-text p-button-sm"
                      (onClick)="editNotification(notificacion)"
                      pTooltip="Editar">
                    </p-button>
                    <p-button
                      icon="pi pi-trash"
                      styleClass="p-button-rounded p-button-danger p-button-text p-button-sm"
                      (onClick)="deleteNotification(notificacion)"
                      pTooltip="Eliminar">
                    </p-button>
                  </div>
                </td>
              </tr>
            </ng-template>

            <!-- EMPTY MESSAGE -->
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="5" class="text-center py-12 text-gray-500 dark:text-gray-400">
                  <div class="flex flex-col items-center justify-center space-y-3">
                    <i class="pi pi-inbox text-4xl opacity-50"></i>
                    <p class="text-sm">
                      {{ searchTerm ? 'No se encontraron notificaciones con los filtros aplicados' : 'No hay notificaciones disponibles' }}
                    </p>
                  </div>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </section>
    </div>
  </main>
</div>

<!-- DIALOGS -->
<p-confirmDialog></p-confirmDialog>
<p-toast></p-toast>
