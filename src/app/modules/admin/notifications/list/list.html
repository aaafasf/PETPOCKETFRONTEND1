<section class="space-y-8">

  <!-- TÍTULO DE LA PÁGINA -->
  <div>
    <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 navbar-title group">
      <span class="inline-block transition-all duration-300 group-hover:tracking-wider group-hover:text-[#F27438]">
        Gestión de Notificaciones
      </span>
      <span
        class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#F27438]
               group-hover:w-full transition-all duration-500">
      </span>
    </h2>
    <p class="text-xs text-gray-500 dark:text-gray-400">
      Admin &gt; Notificaciones &gt; Lista
    </p>
  </div>

  <!-- CONTENIDO -->
  <div class="p-14 space-y-8">

    <!-- CARD PRINCIPAL -->
    <section
      class="bg-white dark:bg-[#020617]/80 rounded-[2.5rem] p-12
             shadow-xl border border-gray-200 dark:border-white/10 transition">

      <!-- HEADER CARD -->
      <div class="flex justify-between items-center mb-8">
        <div>
          <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2">
            Gestión de Notificaciones
          </h1>
          <p class="text-gray-600 dark:text-gray-400">
            Crea, edita y administra notificaciones para los usuarios
          </p>
        </div>

        <p-button
          label="Crear Notificación"
          icon="pi pi-plus"
          (onClick)="createNotification()"
          styleClass="p-button-primary">
        </p-button>
      </div>

      <!-- BUSCADOR -->
      <div class="mb-8">
        <p-inputGroup>
          <p-inputGroupAddon>
            <i class="pi pi-search text-gray-400"></i>
          </p-inputGroupAddon>
          <input
            pInputText
            type="text"
            [(ngModel)]="searchTerm"
            (input)="filtrarNotificaciones()"
            placeholder="Buscar por usuario, mensaje..."
            class="w-full rounded-xl border border-gray-200 dark:border-white/10">
        </p-inputGroup>
      </div>

      <!-- TABLA -->
      <div class="overflow-x-auto rounded-xl border border-gray-200 dark:border-white/10">
        <p-table
          [value]="notificacionesFiltradas"
          [loading]="loading"
          [paginator]="true"
          [rows]="10"
          [rowsPerPageOptions]="[5, 10, 25]"
          [showCurrentPageReport]="true"
          currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} notificaciones"
          styleClass="p-datatable-striped"
          responsiveLayout="scroll">

          <!-- HEADER -->
          <ng-template pTemplate="header">
            <tr class="bg-gray-50 dark:bg-white/5">
              <th pSortableColumn="mensaje">Mensaje <p-sortIcon field="mensaje"></p-sortIcon></th>
              <th pSortableColumn="nameUsers">Usuario <p-sortIcon field="nameUsers"></p-sortIcon></th>
              <th pSortableColumn="estadoNotificacion">Estado <p-sortIcon field="estadoNotificacion"></p-sortIcon></th>
              <th pSortableColumn="createNotificacion">Fecha <p-sortIcon field="createNotificacion"></p-sortIcon></th>
              <th class="text-center">Acciones</th>
            </tr>
          </ng-template>

          <!-- BODY -->
          <ng-template pTemplate="body" let-notificacion>
            <tr class="hover:bg-gray-50 dark:hover:bg-white/5 transition">
              <td>{{ notificacion.mensaje }}</td>
              <td>{{ notificacion.nameUsers || '-' }}</td>
              <td>
                <p-tag
                  [value]="getEstadoLabel(notificacion)"
                  [severity]="getSeverityEstado(notificacion.estadoNotificacion)">
                </p-tag>
              </td>
              <td>{{ formatearFecha(notificacion.createNotificacion) }}</td>
              <td class="text-center">
                <p-button
                  icon="pi pi-pencil"
                  styleClass="p-button-text p-button-sm p-button-warning"
                  (onClick)="editNotification(notificacion)">
                </p-button>
                <p-button
                  icon="pi pi-trash"
                  styleClass="p-button-text p-button-sm p-button-danger"
                  (onClick)="deleteNotification(notificacion)">
                </p-button>
              </td>
            </tr>
          </ng-template>

          <!-- EMPTY -->
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="5" class="text-center py-12 text-gray-500">
                No hay notificaciones
              </td>
            </tr>
          </ng-template>

        </p-table>
      </div>
    </section>
  </div>
</section>

<p-confirmDialog></p-confirmDialog>
<p-toast></p-toast>
