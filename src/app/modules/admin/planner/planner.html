<div class="flex h-screen bg-gray-100 font-sans">
  
  <!-- SIDEBAR - AGREGAR CLASES DE CREATE-USER -->
  <aside class="w-64 bg-white border-r border-gray-200 flex flex-col relative z-10 sidebar-animation">
    <div class="p-6 text-center">
      <img src="assets/img/logo-circular.png" alt="PetPocket Logo" class="w-28 mx-auto transform transition-transform duration-300 hover:scale-110">
      <p class="text-center text-xs font-bold text-gray-400 mt-2 tracking-wider">ADMIN PANEL</p>
    </div>

    <nav class="flex-1 px-4 space-y-2 menu-items">
      <!-- Dashboard -->
      <a routerLink="/admin/dashboard" 
         routerLinkActive="active-menu bg-gray-100 text-[#F27438] font-bold" 
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center p-3 rounded-xl text-gray-600 hover:bg-gray-50 transition">
        <span class="menu-icon mr-3">üìä</span> 
        <span class="menu-text">Dashboard</span>
        <span class="menu-highlight"></span>
      </a>
      
      <!-- Agenda -->
      <a routerLink="/admin/agenda" 
         routerLinkActive="active-menu bg-gray-100 text-[#F27438] font-bold" 
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center p-3 rounded-xl text-gray-600 hover:bg-gray-50 transition">
        <span class="menu-icon mr-3">üìÖ</span> 
        <span class="menu-text">Agenda</span>
        <span class="menu-highlight"></span>
      </a>
      
      <!-- Panel (ACTIVO) -->
      <a routerLink="/admin/planner" 
         routerLinkActive="active-menu bg-gray-100 text-[#F27438] font-bold" 
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center p-3 rounded-xl text-gray-600 hover:bg-gray-50 transition">
        <span class="menu-icon mr-3">üìã</span> 
        <span class="menu-text">Panel</span>
        <span class="menu-highlight"></span>
      </a>
      
      <!-- Servicios -->
      <a routerLink="/admin/servicios" 
         routerLinkActive="active-menu bg-gray-100 text-[#F27438] font-bold" 
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center p-3 rounded-xl text-gray-600 hover:bg-gray-50 transition">
        <span class="menu-icon mr-3">ü©∫</span> 
        <span class="menu-text">Servicios</span>
        <span class="menu-highlight"></span>
      </a>
      
      <!-- Configuraci√≥n -->
      <a routerLink="/admin/configuracion" 
         routerLinkActive="active-menu bg-gray-100 text-[#F27438] font-bold" 
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center p-3 rounded-xl text-gray-600 hover:bg-gray-50 transition">
        <span class="menu-icon mr-3">‚öôÔ∏è</span> 
        <span class="menu-text">Configuraci√≥n</span>
        <span class="menu-highlight"></span>
      </a>
      
      <!-- Registro de usuario -->
      <a routerLink="/admin/users/create" 
         routerLinkActive="active-menu bg-gray-100 text-[#F27438] font-bold" 
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center p-3 rounded-xl text-gray-600 hover:bg-gray-50 transition">
        <span class="menu-icon mr-3">‚ûï</span> 
        <span class="menu-text">Registro de usuario</span>
        <span class="menu-highlight"></span>
      </a>
      
      <!-- Usuarios registrados -->
      <a routerLink="/admin/users" 
         routerLinkActive="active-menu bg-gray-100 text-[#F27438] font-bold" 
         [routerLinkActiveOptions]="{ exact: true }"
         class="menu-item flex items-center p-3 rounded-xl text-gray-600 hover:bg-gray-50 transition">
        <span class="menu-icon mr-3">üë•</span> 
        <span class="menu-text">Usuarios registrados</span>
        <span class="menu-highlight"></span>
      </a>
    </nav>

    <div class="p-6">
      <img src="assets/img/pet-illustration.jpg" class="w-20 mx-auto opacity-30">
    </div>
  </aside>

  <main class="flex-1 flex flex-col overflow-hidden">
    
    <!-- HEADER - AGREGAR CLASES DE NAVBAR -->
    <header class="bg-white h-20 border-b flex items-center justify-between px-8 navbar-container">
      <h2 class="text-xl font-black text-gray-800 navbar-title group">
        <span class="inline-block transition-all duration-300 group-hover:tracking-wider group-hover:text-[#F27438]">
          Panel Cl√≠nico
        </span>
        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#F27438] group-hover:w-full transition-all duration-500"></span>
      </h2>
      <div class="flex items-center space-x-6">
        <div class="flex items-center space-x-3">
          <span class="text-sm font-bold text-gray-600">Admin</span>
          <div class="w-10 h-10 bg-gradient-to-r from-[#F27438] to-orange-500 rounded-full flex items-center justify-center font-bold text-white">
            A
          </div>
        </div>
      </div>
    </header>

    <div class="flex-1 overflow-y-auto p-8 bg-[#F8FAFC]">
      
      <div class="planner-wrapper card-animation">
       
        <!-- Secci√≥n de filtros -->
        <section class="search-filters">
          <div class="filters-left">
            <div class="filter-group">
              <label>Fecha</label>
              <input type="date" [(ngModel)]="selectedDate" (change)="onDateChange()" class="filter-input">
            </div>
       
            <div class="filter-group">
              <label>Veterinario</label>
              <select [(ngModel)]="searchVetId" (change)="onFilterChange()" class="filter-select">
                <option value="">Todos los veterinarios</option>
                <option *ngFor="let vet of veterinarians" [value]="vet.id">{{ vet.name }}</option>
              </select>
            </div>
       
            <div class="filter-group">
              <label>Servicios:</label>
              <select [(ngModel)]="searchServiceId" (change)="onFilterChange()" class="filter-select">
                <option value="">Todos los servicios</option>
                <option *ngFor="let srv of clinicServices" [value]="srv.idServicio">{{ srv.nombreServicio }}</option>
              </select>
            </div>
       
            <button class="btn-reset" (click)="resetFilters()" title="Reset Filters">
              üîÑ
            </button>
          </div>
       
          <div class="actions-right">
            <button class="btn-add icon-button" (click)="openCreateModal()">
              <span class="icon">+</span> Nueva Cita
            </button>
          </div>
        </section>
       
        <!-- Contenedor del calendario -->
        <div class="calendar-container">
          <div class="planner-grid" [style.grid-template-columns]="'repeat(' + veterinarians.length + ', 1fr)'">
            <div *ngFor="let vet of veterinarians" class="vet-column">
              <div class="header-cell">
                <span class="vet-name">{{ vet.name }}</span>
              </div>
       
              <div class="slots-container">
                <ng-container *ngIf="plannerAppointments$ | async as allAppts">
                  <!-- Tarjetas de citas -->
                  <div *ngFor="let appt of getAppointmentsForVet(vet.id, allAppts)" 
                       class="appointment-card card-service"
                       [ngClass]="appt.estadoCita"
                       (click)="onAppointmentClick(appt.idCita)">
       
                    <div class="card-header" [ngClass]="getEstadoClass(appt.estadoCita)">
                      <div class="date-box">
                        <span class="day">{{ appt.fecha | date:'dd' }}</span>
                        <span class="month-year">{{ appt.fecha | date:'MMM' }}</span>
                      </div>
                      <span class="status-label" [ngClass]="getEstadoLabelClass(appt.estadoCita)">
                        {{ appt.estadoCita | titlecase }}
                      </span>
                    </div>
       
                    <div class="card-body">
                      <div class="main-info">
                        <h3 class="patient-name">{{ appt.mascotaNombre }}</h3>
                        <span class="owner-name">Due√±o: {{ appt.clienteNombre }}</span>
                      </div>
       
                      <div class="tags-row">
                        <div class="tag-item"><span>‚è∞</span> {{ appt.hora }}</div>
                        <div class="tag-item" [style.color]="appt.color"><span>ü©∫</span> {{ (appt.servicioNombre) }}</div>
                      </div>
       
                      <div class="card-footer">
                        <div class="action-buttons">
                          <button class="btn-icon edit">‚úé</button>
                          <button class="btn-icon delete" (click)="onDeleteClick($event, appt.idCita)">üóë</button>
                        </div>
                      </div>
                    </div>
                  </div>
       
                  <div *ngIf="getAppointmentsForVet(vet.id, allAppts).length === 0" class="empty-col-msg">
                    Libre
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
       
      <!-- Modal -->
      <app-form-manual 
        *ngIf="isModalOpen" 
        [veterinarians]="veterinarians" 
        [clientes]="clientes" 
        [mascotas]="mascotas"
        [services]="clinicServices"
        [appointmentId]="selectedAppointmentId" 
        (save)="handleSaveAppointment($event)" 
        (close)="isModalOpen = false">
      </app-form-manual>
    </div>
  </main>
</div>
